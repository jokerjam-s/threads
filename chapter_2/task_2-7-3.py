import threading
from concurrent.futures import ThreadPoolExecutor
from time import sleep

numbers = [6359, 5217, 5411, 3615, 1524, 5946, 5693, 9662, 8922, 1657, 6202, 2930, 2651, 6594, 4482, 5504, 6084, 5142,
           3272, 1934, 1002, 7333, 2003, 9584, 1018, 1882, 5929, 3411, 8984, 8886, 7037, 4988, 6961, 2602, 8114, 4462,
           3908, 3549, 3812, 5882, 7907, 2438, 2210, 3879, 3765, 8623, 1654, 3562, 5205, 5082, 8443, 8742, 9058, 6979,
           7968, 2205, 8830, 8798, 2028, 7474, 8519, 1853, 1815, 3194, 3700, 9318, 2716, 5772, 8939, 8925, 1594, 9005,
           5326, 4190, 8645, 6392, 6583, 8614, 5242, 2417, 7037, 2122, 8311, 6808, 9534, 7189, 1493, 8339, 1669, 2605,
           1653, 3423, 6555, 6779, 1749, 3709, 4545, 8217, 5080, 8658, 2731, 7139, 6508, 2515, 2280, 7627, 3565, 9623,
           7520, 5807, 5403, 1356, 7310, 3268, 3320, 4320, 6361, 4625, 7427, 2781, 5582, 8355, 2359, 7556, 3050, 1415,
           8070, 8967, 8837, 4321, 3825, 1149, 2294, 7043, 1180, 9053, 2626, 1738, 4709, 1462, 9154, 7050, 3493, 2564,
           8211, 4064, 6247, 7560, 3281, 8758, 7311, 9058, 1165, 2128, 1020, 5943, 5202, 8381, 5780, 8122, 2733, 7886,
           5531, 8215, 3216, 2805, 5015, 5895, 3380, 2714, 4199, 2827, 5992, 6311, 5161, 9963, 3934, 6621, 1322, 4085,
           1456, 9762, 9934, 3822, 9146, 4760, 7963, 2974, 1447, 4974, 3031, 9900, 5224, 6079, 1953, 3275, 5103, 6228,
           7865, 5056, 7687, 8284, 1999, 2714, 5467, 9861, 5661, 1950, 7137, 9445, 5819, 9210, 4397, 4468, 8578, 8353,
           7619, 9807, 8002, 2331, 9559, 3839, 3859, 3444, 1447, 8070, 2467, 8267, 9940, 9543, 7297, 9920, 5233, 8354,
           6332, 9561, 9691, 1817, 6800, 2196, 8794, 3915, 4301, 1401, 6991, 4223, 9814, 2081, 5567, 4763, 3989, 9207,
           5401, 6183, 3444, 8359, 9853, 4002, 3604, 8632, 2851, 7750, 8514, 7307, 9140, 9593, 1601, 9575, 6217, 6139,
           8702, 1388, 8320, 1938, 4871, 4884, 7389, 7395, 3164, 7883, 6130, 8117, 3950, 7936, 3045, 1145, 7624, 4846,
           3988, 6984, 1819, 6388, 6340, 7080, 5969, 5628, 8473, 9293, 3580, 9281, 7502, 7637, 7529, 5291, 5255, 9682,
           9692, 8973, 7644, 3389, 7948, 6541, 3357, 5617, 5757, 1161, 7268, 5434, 7295, 4093, 1559, 9555, 1382, 7186,
           5743, 3025, 4230, 5762, 7604, 7082, 5084, 2305, 6879, 2270, 5986, 5009, 1158, 2653, 5387, 4792, 5740, 4508,
           4342, 3076, 6788, 5736, 3993, 6070, 7070, 9979, 4697, 3003, 6958, 8809, 1256, 7880, 2872, 5856, 2689, 9092,
           1048, 5280, 3087, 9947, 6237, 8661, 9337, 9809, 6948, 2743, 1395, 5282, 3791, 5772, 3130, 2233, 9313, 9084,
           2005, 3542, 3487, 9026, 1653, 2549, 2276, 5470, 3732, 4311, 7051, 3356, 2165, 1458, 8139, 5572, 5049, 8948,
           3894, 5076, 4143, 5271, 8349, 5761, 3131, 4662, 8067, 4042, 6013, 6159, 8990, 3215, 5069, 8940, 4296, 1783,
           3038, 6150, 5996, 6909, 8407, 9960, 9951, 4472, 4430, 3918, 7509, 3764, 3731, 8947, 1499, 5983, 2804, 9562,
           1895, 6970, 5018, 4969, 3366, 7799, 5906, 9435, 1130, 7005, 1575, 5643, 6518, 4069, 7679, 8582, 1237, 8788,
           4083, 9273, 3314, 6154, 2363, 6417, 6550, 9788, 7268, 4765, 8816, 2055, 4706, 3970, 1425, 3780, 6766, 3110,
           8364, 4781, 1663, 4298, 3345, 5228, 8469, 3989, 2893, 4391, 1848, 6807, 3069, 8004, 1692, 4631, 5544, 1580,
           1226, 8217, 7308, 3621, 7844, 5811, 4863, 1701, 7613, 4771, 5724, 8569, 9593, 3821]

# Глобальная переменная для отслеживания состояния потоков
thread_info = {}


def setup_environment():
    """Инициализирует поток, устанавливая уникальное имя и отслеживая его состояние."""
    thread_info[threading.current_thread().name] = 0


def process_task(number):
    """Обработка числа."""
    thread_info[threading.current_thread().name] += 1
    sleep(.1)


# Основная функция для создания и запуска необходимого пула потоков
def main():
    even_numbers = filter(lambda i: i % 2 == 0, numbers)

    with ThreadPoolExecutor(max_workers=10, thread_name_prefix='environment', initializer=setup_environment) as executor:
        threads = executor.map(process_task, even_numbers)

    for k, v in thread_info.items():
        print(f'{k} - Чисел обработано: {v}')


# Запуск основной функции
if __name__ == '__main__':
    main()
